{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Matan\\\\Pictures\\\\test-project\\\\NfTsWebSiteStore-FE\\\\src\\\\components\\\\AvailableItems.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport classes from \"./AvailableItems.module.css\";\nimport { faHeart, faShoppingCart, faTrash } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { addToFavorite, getUserOrders, addItemToOrder, getAllItems, removeItemFromOrder } from \"../services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AvailableItems = ({\n  setItems,\n  items,\n  user,\n  pendingOrderId,\n  setOrders,\n  setPendingOrderId,\n  isLoggedIn,\n  itemQuantities,\n  setItemQuantities,\n  setFavoriteItems,\n  favoriteItems\n}) => {\n  _s();\n  const userName = user.user && user.user.sub;\n  const [message, setMessage] = useState(\"\");\n  useEffect(() => {\n    const fetchItems = () => {\n      if (userName) {\n        getAllItems({\n          userName\n        }).then(response => {\n          setItems(response.data);\n        }).catch(error => {\n          console.error(\"Error fetching items:\", error);\n        });\n      }\n    };\n    fetchItems();\n  }, [userName, setItems]);\n  const importImage = imageName => {\n    try {\n      return require(`../images/${imageName}.png`);\n    } catch (err) {\n      console.error(\"Error importing image: \", err);\n      return null;\n    }\n  };\n  const handleAddToFavorite = async itemId => {\n    if (!isLoggedIn) {\n      console.error(\"User is not logged in\");\n      return;\n    }\n    if (favoriteItems.includes(itemId)) {\n      setMessage(\"This item is already in your favorites.\");\n      setTimeout(() => setMessage(\"\"), 3000);\n      return;\n    }\n    try {\n      const itemToAdd = items.find(item => item.id === itemId);\n      if (!itemToAdd) {\n        console.error(\"Item not found\");\n        return;\n      }\n      const favoriteItem = {\n        userName,\n        itemId: itemToAdd.id,\n        item: {\n          id: itemToAdd.id,\n          name: itemToAdd.name,\n          photo: itemToAdd.photo,\n          price: itemToAdd.price,\n          stock: itemToAdd.stock\n        }\n      };\n      await addToFavorite(favoriteItem);\n      setFavoriteItems([...favoriteItems, itemToAdd.id]); // Update favorite items with the correct itemId\n\n      setMessage(`${favoriteItem.item.name} added to favorites!`);\n      setTimeout(() => setMessage(\"\"), 3000);\n    } catch (error) {\n      console.error(\"Error handling favorite:\", error);\n    }\n  };\n  const specificImages = Array.from({\n    length: 20\n  }, (_, index) => ({\n    id: index + 1,\n    photo: importImage(`item${index + 1}`)\n  }));\n  const getSpecificPhotoById = itemId => {\n    const specificImage = specificImages.find(image => image.id === itemId);\n    return specificImage ? specificImage.photo : \"../images/default.jpg\";\n  };\n  const updateOrdersAndItems = useCallback(() => {\n    getUserOrders(userName).then(response => {\n      setOrders(response.data);\n      const updatedPendingOrder = response.data.find(order => order.orderStatus === \"PENDING\");\n      if (updatedPendingOrder) {\n        setPendingOrderId(updatedPendingOrder.orderId);\n        const newQuantities = {};\n        updatedPendingOrder.items.forEach(item => {\n          newQuantities[item.itemId] = item.quantity;\n        });\n        setItemQuantities(newQuantities);\n      } else {\n        setPendingOrderId(null);\n        if (!pendingOrderId) {\n          setItemQuantities({});\n        }\n      }\n    }).catch(error => {\n      console.error(\"Error fetching updated orders:\", error);\n    });\n  }, [userName, pendingOrderId, setItemQuantities, setOrders, setPendingOrderId]);\n  useEffect(() => {\n    updateOrdersAndItems();\n  }, [updateOrdersAndItems]);\n  const handleAddItemToOrder = item => {\n    if (!user || !item.id) {\n      console.error(\"Authentication context is not set properly.\");\n      return;\n    }\n    const orderFunction = pendingOrderId ? addItemToOrder(userName, item) : addItemToOrder(userName, item, \"PENDING\");\n    orderFunction.then(response => {\n      updateOrdersAndItems();\n    }).catch(error => {\n      console.error(\"Error updating/creating order:\", error);\n    });\n  };\n  const handleAddToCart = item => {\n    const existingQuantity = itemQuantities[item.id] || 0;\n    const quantityToAdd = 1;\n    if (item.stock === 0) {\n      setMessage(`Sorry, ${item.name} is currently out of stock.`);\n      setTimeout(() => setMessage(\"\"), 3000);\n      return;\n    }\n    if (existingQuantity + quantityToAdd > item.stock) {\n      setMessage(`Sorry, only ${item.stock} units of ${item.name} are available.`);\n      setTimeout(() => setMessage(\"\"), 3000);\n      return;\n    }\n    setItemQuantities(prevQuantities => ({\n      ...prevQuantities,\n      [item.id]: existingQuantity + quantityToAdd\n    }));\n    handleAddItemToOrder({\n      ...item,\n      quantity: existingQuantity + quantityToAdd\n    });\n    setMessage(`${item.name} added to cart!`);\n    setTimeout(() => setMessage(\"\"), 3000);\n  };\n  const handleRemoveItemFromOrder = itemId => {\n    const existingQuantity = itemQuantities[itemId];\n    if (!existingQuantity || existingQuantity <= 0) {\n      setMessage(\"No items to remove from the order.\");\n      setTimeout(() => setMessage(\"\"), 3000);\n      return;\n    }\n    const newQuantity = existingQuantity - 1;\n    setItemQuantities(prevQuantities => ({\n      ...prevQuantities,\n      [itemId]: newQuantity > 0 ? newQuantity : 0\n    }));\n    if (newQuantity > 0) {\n      handleAddItemToOrder({\n        id: itemId,\n        quantity: newQuantity\n      });\n    } else {\n      removeItemFromOrder(pendingOrderId, itemId).then(() => {\n        setMessage(\"Item removed from cart.\");\n        setTimeout(() => setMessage(\"\"), 3000);\n        updateOrdersAndItems();\n      }).catch(error => {\n        console.error(\"Error removing item from order:\", error);\n      });\n    }\n  };\n  const [hoveredItemId, setHoveredItemId] = useState(null);\n  const handleMouseEnter = id => {\n    setHoveredItemId(id);\n  };\n  const handleMouseLeave = () => {\n    setHoveredItemId(null);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [message && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes[\"message-box\"],\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes[\"available-items\"],\n      children: items.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes[\"item-card\"],\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: getSpecificPhotoById(item.id),\n          alt: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Price: $\", item.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Available: \", item.stock, \" items\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 13\n        }, this), isLoggedIn && item && itemQuantities && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Items in Cart: \", itemQuantities[item.id] || 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes[\"description-circle\"],\n          onMouseEnter: () => handleMouseEnter(item.id),\n          onMouseLeave: handleMouseLeave,\n          children: \"!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 13\n        }, this), hoveredItemId === item.id && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes[\"description-box\"],\n          children: item.photo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 15\n        }, this), isLoggedIn && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: classes.faHeart,\n            \"aria-label\": `Add ${item.name} to favorites`,\n            onClick: () => handleAddToFavorite(item.id),\n            children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faHeart,\n              className: \"faHeart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 16\n            }, this)\n          }, item.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: classes.faTrash,\n            \"aria-label\": `Remove ${item.name} from cart`,\n            onClick: () => handleRemoveItemFromOrder(item.id),\n            children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faTrash\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: classes.faShoppingCart,\n            \"aria-label\": `Add ${item.name} to cart`,\n            onClick: () => handleAddToCart(item),\n            children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faShoppingCart\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)]\n      }, item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(AvailableItems, \"DjWh/jXVeCkUtI7213znHNcHMF4=\");\n_c = AvailableItems;\nexport default AvailableItems;\nvar _c;\n$RefreshReg$(_c, \"AvailableItems\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","classes","faHeart","faShoppingCart","faTrash","FontAwesomeIcon","addToFavorite","getUserOrders","addItemToOrder","getAllItems","removeItemFromOrder","jsxDEV","_jsxDEV","Fragment","_Fragment","AvailableItems","setItems","items","user","pendingOrderId","setOrders","setPendingOrderId","isLoggedIn","itemQuantities","setItemQuantities","setFavoriteItems","favoriteItems","_s","userName","sub","message","setMessage","fetchItems","then","response","data","catch","error","console","importImage","imageName","require","err","handleAddToFavorite","itemId","includes","setTimeout","itemToAdd","find","item","id","favoriteItem","name","photo","price","stock","specificImages","Array","from","length","_","index","getSpecificPhotoById","specificImage","image","updateOrdersAndItems","updatedPendingOrder","order","orderStatus","orderId","newQuantities","forEach","quantity","handleAddItemToOrder","orderFunction","handleAddToCart","existingQuantity","quantityToAdd","prevQuantities","handleRemoveItemFromOrder","newQuantity","hoveredItemId","setHoveredItemId","handleMouseEnter","handleMouseLeave","children","className","fileName","_jsxFileName","lineNumber","columnNumber","map","src","alt","onMouseEnter","onMouseLeave","onClick","icon","_c","$RefreshReg$"],"sources":["C:/Users/Matan/Pictures/test-project/NfTsWebSiteStore-FE/src/components/AvailableItems.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\r\nimport classes from \"./AvailableItems.module.css\";\r\nimport {\r\n  faHeart,\r\n  faShoppingCart,\r\n  faTrash,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  addToFavorite,\r\n  getUserOrders,\r\n  addItemToOrder,\r\n  getAllItems,\r\n  removeItemFromOrder,\r\n} from \"../services/api\";\r\n\r\nconst AvailableItems = ({\r\n  setItems,\r\n  items,\r\n  user,\r\n  pendingOrderId,\r\n  setOrders,\r\n  setPendingOrderId,\r\n  isLoggedIn,\r\n  itemQuantities,\r\n  setItemQuantities,\r\n  setFavoriteItems,\r\n  favoriteItems,\r\n}) => {\r\n  const userName = user.user && user.user.sub;\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchItems = () => {\r\n      if (userName) {\r\n        getAllItems({ userName })\r\n          .then((response) => {\r\n            setItems(response.data);\r\n          })\r\n          .catch((error) => {\r\n            console.error(\"Error fetching items:\", error);\r\n          });\r\n      }\r\n    };\r\n\r\n    fetchItems();\r\n  }, [userName, setItems]);\r\n\r\n  const importImage = (imageName) => {\r\n    try {\r\n      return require(`../images/${imageName}.png`);\r\n    } catch (err) {\r\n      console.error(\"Error importing image: \", err);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const handleAddToFavorite = async (itemId) => {\r\n    if (!isLoggedIn) {\r\n      console.error(\"User is not logged in\");\r\n      return;\r\n    }\r\n\r\n    if (favoriteItems.includes(itemId)) {\r\n      setMessage(\"This item is already in your favorites.\");\r\n      setTimeout(() => setMessage(\"\"), 3000);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const itemToAdd = items.find((item) => item.id === itemId);\r\n      if (!itemToAdd) {\r\n        console.error(\"Item not found\");\r\n        return;\r\n      }\r\n\r\n      const favoriteItem = {\r\n        userName,\r\n        itemId: itemToAdd.id,\r\n        item: {\r\n          id: itemToAdd.id,\r\n          name: itemToAdd.name,\r\n          photo: itemToAdd.photo,\r\n          price: itemToAdd.price,\r\n          stock: itemToAdd.stock,\r\n        },\r\n      };\r\n\r\n      await addToFavorite(favoriteItem);\r\n      setFavoriteItems([...favoriteItems, itemToAdd.id]); // Update favorite items with the correct itemId\r\n\r\n      setMessage(`${favoriteItem.item.name} added to favorites!`);\r\n      setTimeout(() => setMessage(\"\"), 3000);\r\n    } catch (error) {\r\n      console.error(\"Error handling favorite:\", error);\r\n    }\r\n  };\r\n\r\n  const specificImages = Array.from({ length: 20 }, (_, index) => ({\r\n    id: index + 1,\r\n    photo: importImage(`item${index + 1}`),\r\n  }));\r\n\r\n  const getSpecificPhotoById = (itemId) => {\r\n    const specificImage = specificImages.find((image) => image.id === itemId);\r\n    return specificImage ? specificImage.photo : \"../images/default.jpg\";\r\n  };\r\n\r\n  const updateOrdersAndItems = useCallback(() => {\r\n    getUserOrders(userName)\r\n      .then((response) => {\r\n        setOrders(response.data);\r\n        const updatedPendingOrder = response.data.find(\r\n          (order) => order.orderStatus === \"PENDING\"\r\n        );\r\n\r\n        if (updatedPendingOrder) {\r\n          setPendingOrderId(updatedPendingOrder.orderId);\r\n          const newQuantities = {};\r\n          updatedPendingOrder.items.forEach((item) => {\r\n            newQuantities[item.itemId] = item.quantity;\r\n          });\r\n          setItemQuantities(newQuantities);\r\n        } else {\r\n          setPendingOrderId(null);\r\n          if (!pendingOrderId) {\r\n            setItemQuantities({});\r\n          }\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error fetching updated orders:\", error);\r\n      });\r\n  }, [\r\n    userName,\r\n    pendingOrderId,\r\n    setItemQuantities,\r\n    setOrders,\r\n    setPendingOrderId,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    updateOrdersAndItems();\r\n  }, [updateOrdersAndItems]);\r\n\r\n  const handleAddItemToOrder = (item) => {\r\n    if (!user || !item.id) {\r\n      console.error(\"Authentication context is not set properly.\");\r\n      return;\r\n    }\r\n    const orderFunction = pendingOrderId\r\n      ? addItemToOrder(userName, item)\r\n      : addItemToOrder(userName, item, \"PENDING\");\r\n\r\n    orderFunction\r\n      .then((response) => {\r\n        updateOrdersAndItems();\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error updating/creating order:\", error);\r\n      });\r\n  };\r\n\r\n  const handleAddToCart = (item) => {\r\n    const existingQuantity = itemQuantities[item.id] || 0;\r\n    const quantityToAdd = 1;\r\n\r\n    if (item.stock === 0) {\r\n      setMessage(`Sorry, ${item.name} is currently out of stock.`);\r\n      setTimeout(() => setMessage(\"\"), 3000);\r\n      return;\r\n    }\r\n\r\n    if (existingQuantity + quantityToAdd > item.stock) {\r\n      setMessage(\r\n        `Sorry, only ${item.stock} units of ${item.name} are available.`\r\n      );\r\n      setTimeout(() => setMessage(\"\"), 3000);\r\n      return;\r\n    }\r\n\r\n    setItemQuantities((prevQuantities) => ({\r\n      ...prevQuantities,\r\n      [item.id]: existingQuantity + quantityToAdd,\r\n    }));\r\n\r\n    handleAddItemToOrder({\r\n      ...item,\r\n      quantity: existingQuantity + quantityToAdd,\r\n    });\r\n    setMessage(`${item.name} added to cart!`);\r\n    setTimeout(() => setMessage(\"\"), 3000);\r\n  };\r\n\r\n  const handleRemoveItemFromOrder = (itemId) => {\r\n    const existingQuantity = itemQuantities[itemId];\r\n\r\n    if (!existingQuantity || existingQuantity <= 0) {\r\n      setMessage(\"No items to remove from the order.\");\r\n      setTimeout(() => setMessage(\"\"), 3000);\r\n      return;\r\n    }\r\n\r\n    const newQuantity = existingQuantity - 1;\r\n    setItemQuantities((prevQuantities) => ({\r\n      ...prevQuantities,\r\n      [itemId]: newQuantity > 0 ? newQuantity : 0,\r\n    }));\r\n\r\n    if (newQuantity > 0) {\r\n      handleAddItemToOrder({ id: itemId, quantity: newQuantity });\r\n    } else {\r\n      removeItemFromOrder(pendingOrderId, itemId)\r\n        .then(() => {\r\n          setMessage(\"Item removed from cart.\");\r\n          setTimeout(() => setMessage(\"\"), 3000);\r\n          updateOrdersAndItems();\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Error removing item from order:\", error);\r\n        });\r\n    }\r\n  };\r\n\r\n  const [hoveredItemId, setHoveredItemId] = useState(null);\r\n\r\n  const handleMouseEnter = (id) => {\r\n    setHoveredItemId(id);\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    setHoveredItemId(null);\r\n  };\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n      {message && <div className={classes[\"message-box\"]}>{message}</div>}\r\n      <div className={classes[\"available-items\"]}>\r\n        {items.map((item) => (\r\n          <div key={item.id} className={classes[\"item-card\"]}>\r\n            <img src={getSpecificPhotoById(item.id)} alt={item.name} />\r\n            <h3>{item.name}</h3>\r\n            <p>Price: ${item.price}</p>\r\n            <p>Available: {item.stock} items</p>\r\n            {isLoggedIn && item && itemQuantities && (\r\n              <p >Items in Cart: {itemQuantities[item.id] || 0}</p>\r\n            )}\r\n            <div\r\n              className={classes[\"description-circle\"]}\r\n              onMouseEnter={() => handleMouseEnter(item.id)}\r\n              onMouseLeave={handleMouseLeave}\r\n            >\r\n              !\r\n            </div>\r\n            {hoveredItemId === item.id && (\r\n              <div className={classes[\"description-box\"]}>{item.photo}</div>\r\n            )}\r\n\r\n            {isLoggedIn && (\r\n              <>\r\n                <button\r\n               className={classes.faHeart}\r\n               key={item.id}\r\n               aria-label={`Add ${item.name} to favorites`}\r\n               onClick={() => handleAddToFavorite(item.id)}\r\n             >\r\n               <FontAwesomeIcon icon={faHeart} className=\"faHeart\" />\r\n              </button>\r\n\r\n                <button\r\n                  className={classes.faTrash}\r\n                  aria-label={`Remove ${item.name} from cart`}\r\n                  onClick={() => handleRemoveItemFromOrder(item.id)}\r\n                >\r\n                  <FontAwesomeIcon icon={faTrash} />\r\n                </button>\r\n\r\n                <button\r\n                 className={classes.faShoppingCart}\r\n                  aria-label={`Add ${item.name} to cart`}\r\n                  onClick={() => handleAddToCart(item)}\r\n                >\r\n                  <FontAwesomeIcon icon={faShoppingCart} />\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AvailableItems;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}